In a saucepan of boiling water blanch shallots 1 minute and drain. Peel shallots and separate into cloves where possible.
In a heavy saucepan cook shallots in butter over moderate heat, stirring, until coated well. Add sugar and 1 tablespoon vinegar and cook, stirring, until sugar mixture turns a golden caramel. Add remaining vinegar, wine, and salt and boil 1 minute. Add cherries and simmer, covered, 45 minutes, or until shallots are tender.
Add cranberries and water and boil gently, uncovered, stirring occasionally, 10 minutes, or until cranberries burst. Transfer compote to a bowl and cool. Compote may be made 5 days ahead and chilled, covered.
Serve compote at room temperature.
