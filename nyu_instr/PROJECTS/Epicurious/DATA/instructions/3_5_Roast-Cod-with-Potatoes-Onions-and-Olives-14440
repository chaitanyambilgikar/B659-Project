Preheat the oven to 450°F. In a large skillet cook the onions and the garlic in the olive oil over moderate heat, stirring occasionally, until the mixture is pale golden. While the onion mixture is cooking, in another large skillet heat the vegetable oil over moderately high heat until it is hot but not smoking and in it sauté the potatoes, peeled and cut into 1/4-inch-thick slices, in batches, turning them, for 5 to 8 minutes, or until they are pale golden, transferring them as they are cooked to a bowl. Add the onion mixture to the potatoes with the olives, the rosemary, the parsley, and salt and pepper to taste and combine the mixture well.
Put the cod in the center of a large shallow baking dish, season it with salt and pepper, and arrange the potato mixture around it. Roast the mixture in the middle of the oven for 20 to 25 minutes, or until the fish just flakes. Flake 2 cups of the cod and reserve it, covered and chilled, for making the cod cannelloni.
