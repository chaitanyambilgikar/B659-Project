Preheat oven to 450°F with rack in upper third.
Toss pineapple and onion with oil and 1/2 teaspoon salt in a large 4-sided sheet pan, then roast, stirring occasionally, until charred in spots, 40 minutes to 1 hour.
Meanwhile, pulse cranberries in a food processor until coarsely chopped, then transfer to a large bowl and stir in 1/3 cup brown sugar.
Add hot roasted-pineapple mixture, stirring until sugar has dissolved, then stir in citrus juice. Season with brown sugar and salt. Cool, then stir in cilantro. Let stand, covered, 1 hour.
