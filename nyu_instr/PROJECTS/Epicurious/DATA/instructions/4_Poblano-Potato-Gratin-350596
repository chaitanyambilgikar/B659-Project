Roast chiles and make rajas: Roast chiles on their sides on racks of gas burners on high, turning with tongs, until skins are blackened all over, about 10 minutes. Immediately transfer to a bowl and let stand, covered tightly, 10 minutes.
When chiles are cool enough to handle, peel or rub off skin. Slit chiles lengthwise, then stem, seed, and devein. Cut lengthwise into thin strips.
Cook onions with 1 teaspoon salt in oil in a 12-inch heavy skillet over medium-low heat, stirring occasionally, until golden, about 8 minutes. Stir in chiles and remove rajas from heat. Reserve 1/2 cup rajas for topping.
Make gratin: Preheat oven to 400°F with rack in middle. Generously butter a 3-quart shallow baking dish.
Peel potatoes, then cut crosswise into 1/16-inch-thick slices with slicer. Transfer to a small heavy pot. Add cream, milk, and 1 teaspoon salt and bring just to a boil over medium heat, stirring occasionally (liquid will thicken). Stir in rajas, then pour mixture evenly into baking dish. Sprinkle reserved 1/2 cup rajas on top.
Bake until potatoes are tender, 45 minutes to 1 hour. Let stand 15 minutes before serving.
