In an 8- or 9-inch skillet heat 1 cup oil over moderate heat until hot but not smoking and fry shallot, stirring, until golden, 1 to 2 minutes. Transfer shallot with a slotted spoon to paper towels to drain. Fry garlic in same hot oil and drain in same manner.
In a small bowl stir together tamarind and warm water, mashing tamarind gently, and strain mixture through a fine sieve set over a bowl, pressing hard on solids. Stir in fish sauce, vinegar, sugar, and water.
In a large bowl soak noodles in cold water to cover 15 minutes. Drain noodles and in a kettle of boiling salted water cook until just tender, 1 to 2 minutes. In a colander drain noodles and rinse under cold water. Drain noodles well.
In a large skillet cook onion and bell pepper in remaining 2 tablespoons oil over moderate heat, stirring, until softened and add tomatoes, noodles, and sauce. Cook mixture, stirring, until heated through. Add herbs, garlic, and shallot and toss noodles well.
