Roast brussels sprouts: Put oven rack in upper third of oven and preheat oven to 450°F.
Toss Brussels sprouts with oil, garlic, salt, and pepper, then spread out in 1 layer in 2 large shallow baking pans (17 by 12 inches). Roast, stirring occasionally and switching position of pans halfway through roasting, until tender and browned, 25 to 35 minutes.
Fry shallots while brussels sprouts roast: Heat oil in a 10-inch heavy skillet over moderate heat until temperature measures 250°F (see cooks' note, below), then fry shallots in 3 batches, stirring occasionally, until golden brown, 3 to 5 minutes per batch (watch closely, as shallots can burn easily). Quickly transfer with a slotted spoon to paper towels to drain, spreading in a single layer. (Shallots will crisp as they cool.) Pour off oil from skillet (do not clean).
Sauté mushrooms and assemble dish: Heat 5 tablespoons butter in skillet over moderately high heat until foam subsides, then sauté mushrooms, stirring occasionally, until golden brown and tender, about 7 minutes.
Add wine, thyme, salt, and pepper and boil, uncovered, stirring occasionally, until liquid is reduced to a glaze, about 2 minutes. Add water (1/2 cup) and remaining tablespoon butter and simmer, swirling skillet, until butter is melted. Transfer to a serving dish and stir in Brussels sprouts. Sprinkle with some of shallots and serve with remaining shallots on the side.
