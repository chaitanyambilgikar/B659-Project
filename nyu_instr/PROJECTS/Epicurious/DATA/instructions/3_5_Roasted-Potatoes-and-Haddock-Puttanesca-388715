Heat 2 tablespoons oil in a medium pot over low heat. Add garlic and anchovies; cook, stirring frequently to break up anchovies, until garlic is soft but not browned, 3-4 minutes. Add red pepper flakes; cook until fragrant, about 20 seconds. Add tomato purée, increase heat to medium, and cook, stirring occasionally, until sauce thickens, 15-20 minutes. Stir in olives; simmer for 5 minutes. Season with salt and pepper.
Arrange racks in upper and lower thirds of oven; preheat to 425°F. Place a wire rack in a rimmed baking sheet. Toss 1 tablespoon oil, potatoes, shallots, 1/2 teaspoon salt, and 1/4 teaspoon pepper in a large bowl to coat. Spread in a single layer on prepared rack. Roast on top oven rack for 18 minutes. Keep in oven.
Place fish in an 8x8x2" glass baking dish. Drizzle with remaining 1/2 tablespoon oil and season with salt and pepper. Place on bottom oven rack and roast with potatoes until fish is just opaque in center, potatoes are golden brown and tender, and shallots are crispy, about 7 minutes longer.
Place potatoes, shallots, and fish on a platter in an even layer. Spoon 1 1/2 cups puttanesca over (reserve remaining sauce for another use); garnish with caper berries and parsley.
