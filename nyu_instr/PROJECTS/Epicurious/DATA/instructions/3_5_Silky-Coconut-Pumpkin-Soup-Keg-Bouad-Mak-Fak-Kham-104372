In a heavy skillet, or on a charcoal or gas grill, dry-roast or grill the shallots, turning occasionally until softened and blackened. Peel, cut the shallots lengthwise in half, and set aside.
Peel the pumpkin and clean off any seeds. Cut into small 1/2-inch cubes. You should have 4 1/2 to 5 cups cubed pumpkin.
Place the coconut milk, broth, pumpkin cubes, shallots, and coriander leaves in a large pot and bring to a boil. Add the salt and simmer over medium heat until the pumpkin is tender, about 10 minutes. Stir in the fish sauce and cook for another 2 to 3 minutes. Taste for salt and add a little more fish sauce if you wish. (The soup can be served immediately, but has even more flavor if left to stand for up to an hour. Reheat just before serving.)
Serve from a large soup bowl or in individual bowls. Grind black pepper over generously, and, if you wish, garnish with a sprinkling of minced scallion greens. Leftovers freeze very well.
