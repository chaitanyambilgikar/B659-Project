Cook shallots, carrot, celery, tomatoes, thyme, and bay leaf in oil in a 4- to 5-quart heavy pot over medium-low heat, stirring occasionally, until softened, about 8 minutes.
Add squash, water, nutmeg, 1 teaspoon salt, and 1/4 teaspoon pepper and simmer, covered, until squash is very tender, 20 to 25 minutes. Discard thyme and bay leaf.
Purée soup in batches in a blender until smooth (use caution when blending hot liquids). Thin soup if desired and season with salt and pepper.
Ladle soup over chestnuts in bowls.
