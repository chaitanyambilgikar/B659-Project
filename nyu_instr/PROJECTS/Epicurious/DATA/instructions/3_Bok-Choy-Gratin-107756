Preheat oven to 425°F. Lightly butter a 2-quart gratin dish and dust with 2 tablespoons bread crumbs.
Cut bok choy stems and center ribs into 1/2-inch pieces and coarsely chop leaves. Cook stems and ribs in a large pot of boiling salted water until just tender, about 5 minutes, then add leaves and cook 30 seconds. Drain in a colander and rinse under cold water until cool enough to handle. Squeeze out excess water by handfuls.
Cook shallot in 1 tablespoon butter in a 12-inch heavy skillet over moderate heat, stirring, until softened, about 2 minutes. Add bok choy and cook, stirring, until greens are coated with butter and shallot, 1 to 2 minutes. Spread bok choy in baking dish.
Melt 2 tablespoons butter in a 2-quart heavy saucepan over moderately low heat, then add flour and cook roux, stirring constantly, 2 minutes. Add milk in a slow stream, whisking constantly, and bring to a boil, whisking. Reduce heat and simmer, stirring, 5 minutes. Add nutmeg, salt, and pepper, then stir in Gruyère and 2 tablespoons parmesan and pour evenly over bok choy.
Toss remaining 1/4 cup bread crumbs with remaining 2 tablespoons parmesan in a small bowl and blend in remaining 2 tablespoons butter with your fingertips until mixture resembles coarse meal. Season with salt and pepper. Sprinkle mixture evenly over gratin and bake in upper third of oven until bubbly and golden brown, about 20 minutes.
