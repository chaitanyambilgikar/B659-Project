Blanch onions in boiling water 3 minutes, then drain in a colander and rinse under cold water. Peel onions.
Heat oil in a 10-inch heavy skillet over moderate heat until hot but not smoking, then cook onions, shaking skillet frequently, until browned, about 4 minutes. Add remaining ingredients, stirring until sugar is dissolved, then simmer, uncovered, stirring occasionally, until onions are tender when pierced with a fork and most of liquid is evaporated, 40 to 45 minutes. Cool onions completely and discard rosemary sprig.
