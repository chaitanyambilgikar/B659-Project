Shell fresh peas if using. Diagonally cut sugar snaps and/or snow peas into thirds. Finely chop pancetta and shallots separately.
Fill a 6-quart pasta pot three fourths full with salted water and bring to a boil for peas and pasta. Have ready a bowl of ice and cold water.
Cook fresh or frozen peas in boiling water until tender, about 2 minutes, and with a slotted spoon transfer to ice water to stop cooking. Cook sugar snaps and/ or snow peas in boiling water until crisp-tender, about 2 minutes, and with slotted spoon transfer to ice water. Reserve water in pot over low heat, covered. Drain peas in a colander and transfer to a bowl.
In a deep 12-inch heavy skillet heat oil over moderate heat until hot but not smoking and cook pancetta in oil, stirring, until golden brown and edges are crisp, about 10 minutes. Stir in shallots and cook, stirring, until just tender, about 2 minutes.
Return water in pot to a boil. Cook pasta in boiling water, stirring occasionally, until al dente and ladle out and reserve 1 cup pasta water. Drain pasta in colander and add to pancetta mixture with peas, 1/4 cup reserved pasta water, and salt and pepper to taste. Heat mixture over low heat, gently tossing (and adding more pasta water as needed if mixture becomes dry), until just heated through.
Serve pasta with Parmigiano-Reggiano.
