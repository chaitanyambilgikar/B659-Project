Purée cilantro with 6 tablespoons oil and 1/4 teaspoon salt in a blender until smooth. Transfer purée to a bowl and set blender aside.
Cook onion in remaining tablespoon oil in a 3-quart heavy saucepan over moderate heat, stirring occasionally, until beginning to brown, 4 to 5 minutes. Add allspice and remaining 3/4 teaspoon salt and cook, stirring frequently, 1 minute. Add lentils, broth, and water and bring to a boil, then reduce heat and simmer, covered, until lentils are very soft, about 30 minutes. Transfer 1 cup lentils with some of broth to blender and purée until smooth (use caution when blending hot liquids), then return to saucepan. Add lemon juice and pepper to taste. Stir in cilantro purée.
