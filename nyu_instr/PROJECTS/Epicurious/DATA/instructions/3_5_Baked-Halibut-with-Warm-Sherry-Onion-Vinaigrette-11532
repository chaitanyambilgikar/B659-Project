In a heavy skillet cook onion, 1 1/2 tablespoons shallot, and garlic in butter with salt and pepper to taste over moderate heat, stirring, until onion is pale golden, about 10 minutes.
Stir in vinegar and cook, covered 5 minutes. Stir in tomato and cook, covered, stirring occasionally, 10 minutes. Stir in bell pepper and 1/4 cup oil and cook, uncovered, stirring, 2 minutes. Stir in parsley and remaining 1/4 cup oil and keep vinaigrette warm.
Preheat oven to 425°F. and butter a baking dish just large enough to hold fillets in one layer.
Sprinkle remaining 1 1/2 tablespoons shallot in baking dish and in it arrange fillets, seasoned with salt and pepper. Add thyme sprig, wine, and stock or clam juice and cover fillets with a buttered piece of wax paper. Bake fish in middle of oven 10 to 15 minutes (depending upon thickness of fillets), or until just cooked through.
Transfer fillets to a large plate and keep warm. Pour cooking liquid through a fine sieve set over skillet of vinaigrette. Cook vinaigrette over moderate heat, stirring, until it is warm and cooking liquid is incorporated.
Serve fish, garnished with additional thyme sprigs, with warm vinaigrette.
