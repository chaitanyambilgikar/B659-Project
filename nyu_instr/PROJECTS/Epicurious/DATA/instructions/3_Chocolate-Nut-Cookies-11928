In a bowl whisk together the flour, the baking powder, the salt, and the cocoa powder. In a food processor grind fine the walnuts with 2 tablespoons of the sugar, add the almond paste, and grind the mixture until it forms a paste. In the bowl of an electric mixer cream together the butter and the remaining 2/3 cup sugar, add the nut paste and the vanilla, and beat the mixture until it is combined well. Beat in the flour mixture at low speed until a dough is formed and beat in the egg whites until they are incorporated.
Working with half the dough at a time, roll out the dough 1/4 inch thick between sheets of plastic wrap, cut out diamond shapes with a 2-inch-wide cutter, and arrange them 1 1/2 inches apart on buttered baking sheets. Press ridges into the diamonds with the tines of a fork and bake the cookies in batches in the middle of preheated 350°F. oven for 10 minutes. Let the cookies cool on the sheets on a rack for 2 minutes, transfer them carefully with a spatula to racks, and let them cool completely. The cookies may be made 3 days in advance and kept in airtight containers.
