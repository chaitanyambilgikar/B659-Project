Blanch shallots in a 3-quart saucepan of boiling water 1 minute, then drain. Peel shallots and separate into cloves if necessary.
Cook shallots in butter in 3-quart saucepan over moderate heat, stirring, 1 minute. Add sugar and 1 tablespoon vinegar and cook, stirring frequently, until sugar mixture turns a golden caramel, 15 to 20 minutes. Carefully add remaining vinegar, wine, and salt and boil, stirring, 1 minute (use caution, as mixture will bubble up). Add cherries and simmer, uncovered, stirring occasionally, until shallots are tender and liquid is syrupy, about 45 minutes.
Add cranberries and water and gently boil over moderate heat, uncovered, stirring occasionally, until cranberries have burst, about 10 minutes. Transfer compote to a bowl and cool completely.
