Chop enough fennel fronds, if using, to measure 2 tablespoons. Quarter fennel bulbs lengthwise, then cut lengthwise into 1/4-inch-thick slices.
Cook fennel bulbs, sliced onion, and anchovy paste in 1 1/2 teaspoons oil in a 12-inch heavy nonstick skillet over moderate heat, stirring, until coated, about 1 minute. Season with salt and pepper, then add broth and braise, covered, stirring occasionally, until vegetables are tender, about 20 minutes.
Remove lid and boil, stirring occasionally, until liquid is evaporated, about 10 minutes. Transfer fennel mixture to a 1 1/2-quart shallow gratin or other shallow 9-inch ceramic or glass baking dish.
Preheat oven to 450°F.
While fennel mixture is braising, cook chopped onion, red pepper flakes, and salt to taste in remaining teaspoon oil in an 8-inch nonstick skillet over moderate heat, stirring occasionally, until onion is softened, 3 to 4 minutes. Add tomatoes with juice and simmer, breaking up tomatoes with a spoon and stirring occasionally, until very thick, 15 to 20 minutes.
Arrange fish fillets on top of fennel mixture and season with salt. Spoon tomato sauce over fish. Cover with a sheet of parchment paper or wax paper, then cover baking dish tightly with foil and bake in middle of oven until fish is just cooked through, 20 to 25 minutes. Sprinkle with fennel fronds.
