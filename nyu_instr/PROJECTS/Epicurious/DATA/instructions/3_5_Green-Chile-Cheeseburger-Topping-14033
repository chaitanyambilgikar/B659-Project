Gas stove method: Lay peppers or chiles on their sides on racks of burners. Turn flame on high and char peppers or chiles, turning them with tongs, until skins are blackened, 3 to 6 minutes.
Broiler method: Preheat broiler. On rack of a broiler pan broil peppers or chiles about 2 inches from heat, turning them frequently, until skins are blistered and charred, 8 to 12 minutes.
Transfer peppers or chiles, roasted by either method, to a bowl and let stand, covered, until cool enough to handle. Wearing rubber gloves, peel peppers or chiles and cut off tops. Discard seeds and ribs.
Chop chiles.
In a heavy saucepan cook onion and garlic in oil over moderately low heat, stirring, until soft.
Sprinkle flour over onion mixture and stir with a wooden spoon until combined well.
Trickle in water, stirring constantly, and stir in chiles. Bring mixture to a simmer, stirring frequently. Reduce heat to moderately low and cook mixture, stirring, until thickened, 3 to 4 minutes. Add salt to taste.
