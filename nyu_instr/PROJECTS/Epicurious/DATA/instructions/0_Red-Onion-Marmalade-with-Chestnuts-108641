Heat 3 tablespoons oil in large deep nonstick skillet over high heat. Add onions and 1 teaspoon salt. Sprinkle with pepper. Sauté until onions are beginning to brown, about 5 minutes. Reduce heat to medium-low; cover and cook until onions are soft, stirring occasionally, about 15 minutes. Increase heat to high; uncover and sauté until onions are brown, about 5 minutes. Add Port, prunes, and vinegar; stir until liquid evaporates and onions darken, about 3 minutes. Add thyme; stir 1 minute. Remove from heat.
Heat 1 tablespoon oil in small skillet over medium-high heat. Add chestnuts and sauté until coated with oil, about 1 minute. Add to onion mixture. Season onion marmalade with more salt and pepper, if desired. Transfer to bowl; cool. (Can be prepared 5 days ahead. Cover and chill. Bring to room temperature before serving.)
*Available at specialty foods stores and some supermarkets.
