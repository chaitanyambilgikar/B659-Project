Coarsely chop chestnuts, reserving 1/3 cup for garnish.
Cook shallot and leeks in 2 tablespoons butter in a 5-quart heavy pot over moderate heat, stirring, until softened. Add wine and simmer until almost all liquid is evaporated, about 1 minute. Stir in fennel, broth, chestnuts (excluding garnish), and water, then simmer, covered, 20 minutes. Stir in half-and-half and cool mixture slightly.
Purée mixture in batches in a blender until smooth, transferring to a bowl (use caution when blending hot liquids). Return soup to pot and bring to a simmer, thinning with water if desired. Season with salt and pepper.
While soup is reheating, heat remaining 4 tablespoons butter in a 10-inch heavy skillet over moderately high heat until foam subsides, then sauté reserved chestnuts with salt and pepper to taste, stirring constantly, until crisp and butter is browned, about 4 minutes.
Serve soup topped with chestnuts and drizzled with browned butter.
