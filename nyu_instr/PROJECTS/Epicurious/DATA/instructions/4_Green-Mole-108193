Put the chicken pieces, onion, and garlic into a large saucepan; add water or chicken broth to cover and add salt. Add the optional giblets if you are making this with water. Bring to a simmer and cook over low heat until the meat is almost tender but still firm, about 25 minutes. (A lot will depend on the quality of the chicken.) If using pork, cook for about 20 minutes longer. Strain, reserving the broth. Reduce or add water to make up to 6 cups (1.5L).
Put the sesame seeds into an ungreased skillet over medium heat, stirring them constantly until they become a deep golden color, about 5 minutes. Take care not to let them burn. Spread them out on a tray to cool. Put the pumpkin seeds into the pan and stir them until they begin to swell and start to pop around, about 3 minutes. Set aside to cool. When the seeds are cool, grind the sesame first with the cloves, peppercorns, and allspice to a slightly textured powder. Then grind the pumpkin seeds to the same texture. Transfer both to a bowl and stir in 1 cup (250ml) of the reserved broth to make a thick paste.
Heat about 3 tablespoons of the lard or oil in a heavy casserole, add the seed paste, and fry over medium-low heat, scraping the bottom of the pan constantly to avoid sticking — if necessary add a little more fat — until dry, shiny, and a rich deep golden color.
Unless you have a large blender jar you may need to blend the greens in two batches, but try to use the minimum of liquid. Put 1 cup (250ml) of the broth into the blender jar and add the garlic, tomate verde, and chiles and blend fairly smooth. Gradually add half of the greens and blend as smoothly as possible. Add the rest of the greens little by little, with just enough of the broth to enable the blades of the blender to work efficiently.
Gradually stir the blended ingredients into the fried seed paste over medium heat, stirring the mixture well after each addition. Continue cooking over medium heat, stirring frequently, until the sauce starts to reduce and thicken, for about 10 minutes. Add the remaining broth and cook for a further 10 minutes — pools of oil will form around the periphery. Add the meat, adjust salt, and cook for a further 10 minutes. Dilute with more broth or water if desired. Serve with corn tortillas.
