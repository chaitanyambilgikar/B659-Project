Rinse the rice in a sieve under cold running water until the water runs clear; put to one side.
Heat the olive oil in a large, heavy-bottomed pot and throw in the onions. Cook over medium heat until they soften and turn golden. Season the chicken thighs and add them to the pan. Brown on all sides, then pour in 2 1/2 cups water and bring to a simmer. Cover with a lid and cook until the chicken is tender, about 20 minutes.
Meanwhile, peel the zest from the orange with a potato peeler, then cut it into matchstick strips. Blanch in a small pan of boiling water for a couple of minutes, then drain.
Dissolve the sugar in 1/2 cup (scant) water in a small, heavy-bottomed pan over medium heat, then bring to a boil and let bubble to reduce and thicken for 5 to 10 minutes until syrupy. Add the orange zest, slivered almonds, and pistachios and boil for 5 minutes, skimming off any froth. Strain the syrup and return to the pan; set aside the orange zest and nuts. Add the saffron and rose water to the syrup and boil again for 3 minutes, then add the cardamom seeds.
Preheat the oven to 300 degrees F. Strain the stock from the chicken thighs and add the syrup to it. Make this up to 3 cups with more water. Bring it to a boil in an ovenproof casserole and add the rice. Season and add two-thirds of the orange zest and nuts, keeping the rest to one side. Bring back to a boil, then cover and simmer until the rice is cooked. The liquid should have all been absorbed by now.
Bury the chicken and onions in the rice and add the fava beans and peas, if you are including them. Put the lid on and cook in the oven for 20 minutes.
Serve straight from the pan or, if you prefer, in a large, warmed serving dish. Sprinkle the last third of the orange zest and nuts over the top before bringing it to the table.
