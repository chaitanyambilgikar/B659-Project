Preheat oven to 350°F and line 2 large baking sheets with parchment paper.
Make dough: In a small bowl whisk together egg and extracts. In a food processor pulse together flour, pistachios, sugar, and salt until combined well (do not finely grind nuts). Add butter in pieces and pulse just until mixture resembles coarse meal. Add egg mixture with motor running and pulse just until dough forms a ball. Turn dough out onto a work surface and with heel of hand press dough together just until smooth and cohesive.
Form level teaspoons of dough into balls and arrange about 1 inch apart on baking sheets. With your thumb gently make an indentation in center of each ball, pressing down almost to bottom.
Bake cookies in batches in lower third of oven until bottoms are pale golden, about 12 minutes. Cool cookies on baking sheets on racks 5 minutes and transfer with a spatula to racks to cool completely.
Make topping: In a small heavy saucepan melt butter and chocolate over low heat, stirring until smooth, and remove pan from heat. Coarsely chop (keeping separate) pistachios and cranberries.
Working with 10 cookies at a time, spoon 1/4 teaspoon chocolate mixture into each indentation and sprinkle pistachios and cranberries over chocolate centers. Let chocolate centers set 30 minutes. Cookies keep, layered between sheets of wax paper in an airtight container at cool room temperature, 10 days.
