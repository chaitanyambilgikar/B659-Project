For the stock: In a heavy-bottomed pot, heat oil over medium heat; stir in ingredients. Cover. Cook until vegetables are soft, about 30minutes. Add 8 cups water. Bring to a boil. Lower heat; simmer for 45 minutes. Strain, reserving broth and half the vegetables. Skim fat. Discard thyme and bay leaf. Puree reserved vegetables in a blender. Stir into stock.
For the soup: Heat oil in the same pot. Sauté onion, garlic, carrot, celery, and herbs. Add reserved broth, tomatoes and beans. Bring to a boil. Lower heat; simmer 30 to 45 minutes. Ladle into bowls; drizzle with pesto or oil.
