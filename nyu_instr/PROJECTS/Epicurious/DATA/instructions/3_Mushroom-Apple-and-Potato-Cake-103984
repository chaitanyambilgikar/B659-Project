Heat 1 tablespoon oil in a 10-inch well-seasoned cast-iron skillet over moderately high heat until hot but not smoking, then sauté mushrooms and half of onion, stirring, until mushrooms are tender and browned, 8 to 10 minutes. Transfer to a bowl and wipe out skillet.
Peel and coarsely grate apple and stir into mushrooms with thyme, 1/2 teaspoon salt, and 1/4 teaspoon pepper.
Preheat oven to 450°F. Peel potatoes and slice 1/8 inch thick (preferably using a mandoline or other manual slicer). Toss with remaining onion, 1/2 teaspoon salt, and 1/2 teaspoon pepper.
Heat remaining 2 tablespoons oil in skillet over moderately high heat. Add one third of potato slices in 1 layer, overlapping slightly. Top with half of mushrooms, spreading in an even layer. Repeat layering with half of remaining potatoes, remaining mushrooms, and then remaining potatoes.
Put skillet in middle of oven and bake 20 minutes.
Invert a pizza pan or round platter over skillet and, holding pan or platter firmly against skillet, flip potato cake onto platter. Carefully slide cake back into skillet and press layers together with a spatula. Bake until underside is golden and crusty and potatoes are tender when pierced with a fork, 8 to 10 minutes more.
