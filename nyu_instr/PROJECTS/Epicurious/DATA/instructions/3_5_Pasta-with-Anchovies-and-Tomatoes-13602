In a 6-quart kettle bring 5 quarts salted water to a boil for pasta.
In a large skillet cook onion and garlic in oil over moderately low heat, stirring, until onion is softened. Add anchovies and cook, stirring, 1 minute. Add tomatoes with reserved juice, vinegar, and red pepper flakes and cook, stirring occasionally, until slightly thickened. Add capers, prosciutto, basil or parsley, and salt and pepper to taste and keep warm.
Cook pasta in boiling water until al dente and drain in a colander. In a large bowl toss pasta with sauce and serve with Parmesan.
