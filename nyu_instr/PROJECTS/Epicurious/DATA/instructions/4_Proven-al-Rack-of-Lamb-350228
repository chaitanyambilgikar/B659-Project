Preheat oven to 400°F with rack in middle.
Mince and mash garlic to a paste with 1/2 teaspoon salt and 1/2 teaspoon pepper. Stir together with herbs and 1 tablespoon oil.
Put tomatoes cut sides up in an oiled small baking dish and drizzle with a third of garlic mixture. Roast until tender, 30 to 40 minutes.
Meanwhile, pat lamb dry and season with 1/4 teaspoon salt and 1/4 teaspoon pepper.
Heat 1 tablespoon oil in a 10-inch ovenproof skillet over medium-high heat until it shimmers. Brown lamb on all sides, 4 to 6 minutes total. Transfer lamb to a cutting board and discard oil from skillet.
Heat remaining tablespoon oil in skillet over medium heat and cook shallots and potatoes, stirring occasionally, until edges are browned, 3 to 5 minutes. Stir in water and half of remaining garlic mixture and remove from heat.
Rub remaining garlic mixture on fat side of lamb racks. Arrange lamb over potatoes and roast in oven until an instant-read thermometer inserted into center of meat (do not touch bone) registers 130°F for medium-rare, 20 to 25 minutes.
Let stand, loosely covered, 5 to 10 minutes. Serve with tomatoes.
