1. Place the crab bodies, shells, and tomalley (and optional shrimp shells or lobster carcasses) in a 6- to 8-quart stockpot and cover with the water. Bring to a boil, skimming the white foam from the surface of the stock. (Using a ladle and a circular motion, push the foam from the center to the outside of the pot, where it is easy to remove.) Reduce the heat so the stock cooks at a fast, steady simmer.
2. Add the onion, celery, tomatoes, garlic, bay leaves, peppercorns, and thyme, and let the stock simmer and cook down for about 1 hour. The liquid should just cover the crab shells as the stock cooks; if it doesnâ€™t, just add a little water.
3. Season the stock lightly with salt. Taste for a rich flavor; if it seems light, simmer for about 20 minutes longer.
4. Strain the stock through a fine-mesh strainer. If you are not going to be using it within the hour, chill it as quickly as possible. Cover the broth after it has completely cooled and keep refrigerated for up to 3 days, or freeze for up to 2 months.
