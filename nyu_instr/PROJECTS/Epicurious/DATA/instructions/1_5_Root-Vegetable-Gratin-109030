Put oven rack in middle position and preheat oven to 400°F. Butter an 8-inch flameproof ceramic dish or metal baking pan.
Simmer cream, milk, thyme, salt, and pepper, uncovered, in a 4-quart heavy saucepan over moderate heat until reduced to about 3/4 cup, 10 to 13 minutes.
While mixture is simmering, peel celery root with a sharp knife, then cut into large wedges. Coarsely grate carrots and celery root in a food processor. Toss with flour in a large bowl until coated well, then add to cream mixture and simmer, uncovered, stirring frequently, 5 minutes.
Transfer to baking dish and smooth top. Sprinkle evenly with Gruyère and bake until bubbling, about 10 minutes.
Turn on broiler and broil gratin 5 to 6 inches from heat until top is golden brown, 3 to 5 minutes. Let stand 10 minutes before serving.
