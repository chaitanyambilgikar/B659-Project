Preheat the oven to 325°F. Line 2 cupcake pans with 18 paper liners and fill the empty cups half full of water to prevent scorching.
To make the cupcakes, mix the flour, baking powder, baking soda, salt, and cocoa powder together in a large bowl. In a food processor, blend the canola oil, agave nectar, soy milk, tofu, vanilla extract, and vinegar, scraping down the bowl often. Blend until very smooth, with no chunks of tofu visible, about 2 to 3 minutes. Combine the wet ingredients with the dry ingredients. Stir well and spoon into the prepared cupcake pan, leaving some room at the top of each cup. Bake for 20 minutes, or until a toothpick inserted into the center of a cupcake comes out clean. Remove the cupcakes from the pan and place on a cooling rack. Cool completely before filling and frosting.
To prepare the filling, blend the tofu in a food processor until very smooth and creamy, approximately 1 to 2 minutes. Add the agave nectar and blend again. Add the peanut butter, vanilla extract, and salt and blend thoroughly until very light and smooth. Refrigerate for 1 to 2 hours to firm before filling the cupcakes.
To assemble the cupcakes, you will need a pastry bag fitted with a large, plain smooth tip. Fill the pastry bag with peanut butter mousse and insert the tip halfway into the top of a cupcake. Squeeze filling inside each cupcake just until it starts to expand.
Next frost the tops. If the frosting is too firm, heat in the microwave for a few seconds to soften it up. Spread the ganache evenly over the tops of the cupcakes. Let the cupcakes sit in the refrigerator until ready to serve.
Garnish with peanuts if desired.
